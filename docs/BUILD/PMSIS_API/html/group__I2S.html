<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>I2S Interface</title>
<title>I2S Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="pulp.css" rel="stylesheet" type="text/css" />
<link href="gap.css" rel="stylesheet" type="text/css" />
<link href="images.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="titlerow">
  <td id="projectlogo"><img alt="Logo" src="gap-logo-55.png" /></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">PMSIS API</div>
    </td>
  <td id="extralogo"><img alt="GreenWaves" src="greenwaves-logo-55.png" /></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__I2S.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">I2S Interface<div class="ingroups"><a class="el" href="group__groupDrivers.html">Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>I2S (Inter-IC Sound) Interface.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpi__i2s__conf.html">pi_i2s_conf</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface configuration options.  <a href="structpi__i2s__conf.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga3513319b4f4230e999dab5baef21cf68"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#ga3513319b4f4230e999dab5baef21cf68">PI_I2S_FMT_DATA_FORMAT_SHIFT</a></td></tr>
<tr class="separator:ga3513319b4f4230e999dab5baef21cf68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3ca7ba8c38ad113d8eba8495da5bdcf2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#ga3ca7ba8c38ad113d8eba8495da5bdcf2">PI_I2S_FMT_DATA_FORMAT_MASK</a></td></tr>
<tr class="separator:ga3ca7ba8c38ad113d8eba8495da5bdcf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga53c8225e2bdfec848af5bea9605b8289"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#ga53c8225e2bdfec848af5bea9605b8289">PI_I2S_FMT_DATA_FORMAT_I2S</a></td></tr>
<tr class="memdesc:ga53c8225e2bdfec848af5bea9605b8289"><td class="mdescLeft">&#160;</td><td class="mdescRight">Standard I2S Data Format.  <a href="#ga53c8225e2bdfec848af5bea9605b8289">More...</a><br /></td></tr>
<tr class="separator:ga53c8225e2bdfec848af5bea9605b8289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga71ba1b454887900a3f3d8a5c596f5e10"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#ga71ba1b454887900a3f3d8a5c596f5e10">PI_I2S_FMT_DATA_FORMAT_PDM</a></td></tr>
<tr class="memdesc:ga71ba1b454887900a3f3d8a5c596f5e10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pulse-Density Modulation Format.  <a href="#ga71ba1b454887900a3f3d8a5c596f5e10">More...</a><br /></td></tr>
<tr class="separator:ga71ba1b454887900a3f3d8a5c596f5e10"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gac17138910d0f85480aee50327eeb1c33"><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#gac17138910d0f85480aee50327eeb1c33">pi_i2s_fmt_t</a></td></tr>
<tr class="separator:gac17138910d0f85480aee50327eeb1c33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6357c0af643f1813349d73da849299a4"><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#ga6357c0af643f1813349d73da849299a4">pi_i2s_opt_t</a></td></tr>
<tr class="separator:ga6357c0af643f1813349d73da849299a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gae4e791976885788e9575c882857054b9"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#gae4e791976885788e9575c882857054b9">pi_i2s_ioctl_cmd</a> </td></tr>
<tr class="separator:gae4e791976885788e9575c882857054b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga81800a8f3373400f3c187c205028b3db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#ga81800a8f3373400f3c187c205028b3db">pi_i2s_setup</a> (uint32_t flags)</td></tr>
<tr class="memdesc:ga81800a8f3373400f3c187c205028b3db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup specific I2S aspects.  <a href="#ga81800a8f3373400f3c187c205028b3db">More...</a><br /></td></tr>
<tr class="separator:ga81800a8f3373400f3c187c205028b3db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1657fc62c170475ec18210f1a57c329c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#ga1657fc62c170475ec18210f1a57c329c">pi_i2s_conf_init</a> (struct <a class="el" href="structpi__i2s__conf.html">pi_i2s_conf</a> *conf)</td></tr>
<tr class="memdesc:ga1657fc62c170475ec18210f1a57c329c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize an I2S configuration with default values.  <a href="#ga1657fc62c170475ec18210f1a57c329c">More...</a><br /></td></tr>
<tr class="separator:ga1657fc62c170475ec18210f1a57c329c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac735eb27206159797c19a499c08a6cc5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#gac735eb27206159797c19a499c08a6cc5">pi_i2s_open</a> (struct pi_device *device)</td></tr>
<tr class="memdesc:gac735eb27206159797c19a499c08a6cc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open an I2S device.  <a href="#gac735eb27206159797c19a499c08a6cc5">More...</a><br /></td></tr>
<tr class="separator:gac735eb27206159797c19a499c08a6cc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga899113b680f7f359c9dc69313e3bfd91"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#ga899113b680f7f359c9dc69313e3bfd91">pi_i2s_close</a> (struct pi_device *device)</td></tr>
<tr class="memdesc:ga899113b680f7f359c9dc69313e3bfd91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close an opened I2S device.  <a href="#ga899113b680f7f359c9dc69313e3bfd91">More...</a><br /></td></tr>
<tr class="separator:ga899113b680f7f359c9dc69313e3bfd91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6872494c60665461c4edb2b44d01c434"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#ga6872494c60665461c4edb2b44d01c434">pi_i2s_ioctl</a> (struct pi_device *device, uint32_t cmd, void *arg)</td></tr>
<tr class="memdesc:ga6872494c60665461c4edb2b44d01c434"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dynamically change the device configuration.  <a href="#ga6872494c60665461c4edb2b44d01c434">More...</a><br /></td></tr>
<tr class="separator:ga6872494c60665461c4edb2b44d01c434"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac863071a455cc4ecde8b458650ddc6f4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#gac863071a455cc4ecde8b458650ddc6f4">pi_i2s_read</a> (struct pi_device *dev, void **mem_block, size_t *size)</td></tr>
<tr class="memdesc:gac863071a455cc4ecde8b458650ddc6f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from the RX queue.  <a href="#gac863071a455cc4ecde8b458650ddc6f4">More...</a><br /></td></tr>
<tr class="separator:gac863071a455cc4ecde8b458650ddc6f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4811af1f7fcd3a58e24f0e53eab040c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#ga4811af1f7fcd3a58e24f0e53eab040c7">pi_i2s_read_async</a> (struct pi_device *dev, pi_task_t *task)</td></tr>
<tr class="memdesc:ga4811af1f7fcd3a58e24f0e53eab040c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data asynchronously from the RX queue.  <a href="#ga4811af1f7fcd3a58e24f0e53eab040c7">More...</a><br /></td></tr>
<tr class="separator:ga4811af1f7fcd3a58e24f0e53eab040c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ccba1a796f9cc90c4d9ec24b2c5040d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__I2S.html#ga0ccba1a796f9cc90c4d9ec24b2c5040d">pi_i2s_read_status</a> (pi_task_t *task, void **mem_block, size_t *size)</td></tr>
<tr class="memdesc:ga0ccba1a796f9cc90c4d9ec24b2c5040d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the status of an asynchronous read.  <a href="#ga0ccba1a796f9cc90c4d9ec24b2c5040d">More...</a><br /></td></tr>
<tr class="separator:ga0ccba1a796f9cc90c4d9ec24b2c5040d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>The I2S API provides support for the I2S interface. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga53c8225e2bdfec848af5bea9605b8289"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga53c8225e2bdfec848af5bea9605b8289">&#9670;&nbsp;</a></span>PI_I2S_FMT_DATA_FORMAT_I2S</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PI_I2S_FMT_DATA_FORMAT_I2S</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Serial data is transmitted in two's complement with the MSB first. Both Word Select (WS) and Serial Data (SD) signals are sampled on the rising edge of the clock signal (SCK). The MSB is always sent one clock period after the WS changes. Left channel data are sent first indicated by WS = 0, followed by right channel data indicated by WS = 1. </p><pre class="fragment">   -. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-. .-.
SCK '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' '-' '
   -.                               .-------------------------------.
WS  '-------------------------------'                               '----
   -.---.---.---.---.---.---.---.---.---.---.---.---.---.---.---.---.---.
SD  |   |MSB|   |...|   |LSB| x |...| x |MSB|   |...|   |LSB| x |...| x |
   -'---'---'---'---'---'---'---'---'---'---'---'---'---'---'---'---'---'
        | Left channel                  | Right channel                 |</pre> 
</div>
</div>
<a id="ga3ca7ba8c38ad113d8eba8495da5bdcf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3ca7ba8c38ad113d8eba8495da5bdcf2">&#9670;&nbsp;</a></span>PI_I2S_FMT_DATA_FORMAT_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PI_I2S_FMT_DATA_FORMAT_MASK</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data Format bit field mask. </p>

</div>
</div>
<a id="ga71ba1b454887900a3f3d8a5c596f5e10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga71ba1b454887900a3f3d8a5c596f5e10">&#9670;&nbsp;</a></span>PI_I2S_FMT_DATA_FORMAT_PDM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PI_I2S_FMT_DATA_FORMAT_PDM</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Serial data is transmitted using the pulse-density modulation. Each sample is a one bit pulse, where the density of the pulses gives the amplitude of the signal. The driver will filter the input signals so that classic PCM samples are stored in the buffers. In single channel mode, the bits are transmitted on clock signal (CLK) rising edges. In dual channel mode, left chanel is transmitted on SCK rising edges and right channel on SCK falling edges. Word Select (WS) is ignored. </p>

</div>
</div>
<a id="ga3513319b4f4230e999dab5baef21cf68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3513319b4f4230e999dab5baef21cf68">&#9670;&nbsp;</a></span>PI_I2S_FMT_DATA_FORMAT_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PI_I2S_FMT_DATA_FORMAT_SHIFT</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data Format bit field position. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gac17138910d0f85480aee50327eeb1c33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac17138910d0f85480aee50327eeb1c33">&#9670;&nbsp;</a></span>pi_i2s_fmt_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="group__I2S.html#gac17138910d0f85480aee50327eeb1c33">pi_i2s_fmt_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga6357c0af643f1813349d73da849299a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6357c0af643f1813349d73da849299a4">&#9670;&nbsp;</a></span>pi_i2s_opt_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="group__I2S.html#ga6357c0af643f1813349d73da849299a4">pi_i2s_opt_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gae4e791976885788e9575c882857054b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae4e791976885788e9575c882857054b9">&#9670;&nbsp;</a></span>pi_i2s_ioctl_cmd</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__I2S.html#gae4e791976885788e9575c882857054b9">pi_i2s_ioctl_cmd</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>IOCTL command </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggae4e791976885788e9575c882857054b9a9fc5a4dc1e57fd420ebe947d3a2f6665"></a>PI_I2S_IOCTL_START&#160;</td><td class="fielddoc"><p>Start the transmission / reception of data. </p>
<p>This command can be used when the interface has been opened or stopped to start sampling. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggae4e791976885788e9575c882857054b9a367d4c7e0071fd5f69f5ddc38602d3d7"></a>PI_I2S_IOCTL_STOP&#160;</td><td class="fielddoc"><p>Stop the transmission / reception of data. </p>
<p>Stop the transmission / reception of data at the end of the current memory block. This command can be used when the interface is sampling and is stopping the interface. When the current TX / RX block is transmitted / received the interface is stopped. Subsequent START command will resume transmission / reception where it stopped. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga899113b680f7f359c9dc69313e3bfd91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga899113b680f7f359c9dc69313e3bfd91">&#9670;&nbsp;</a></span>pi_i2s_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pi_i2s_close </td>
          <td>(</td>
          <td class="paramtype">struct pi_device *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function can be called to close an opened I2S device once it is not needed anymore, in order to free all allocated resources. Once this function is called, the device is not accessible anymore and must be opened again before being used. The caller is blocked until the operation is finished.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>A pointer to the structure describing the device. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1657fc62c170475ec18210f1a57c329c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1657fc62c170475ec18210f1a57c329c">&#9670;&nbsp;</a></span>pi_i2s_conf_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pi_i2s_conf_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpi__i2s__conf.html">pi_i2s_conf</a> *&#160;</td>
          <td class="paramname"><em>conf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function can be called to get default values for all parameters before setting some of them. The structure containing the configuration must be kept alive until the I2S device is opened.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conf</td><td>A pointer to the I2S configuration. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6872494c60665461c4edb2b44d01c434"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6872494c60665461c4edb2b44d01c434">&#9670;&nbsp;</a></span>pi_i2s_ioctl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pi_i2s_ioctl </td>
          <td>(</td>
          <td class="paramtype">struct pi_device *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function can be called to change part of the device configuration after it has been opened or to control it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>A pointer to the structure describing the device. </td></tr>
    <tr><td class="paramname">cmd</td><td>The command which specifies which parameters of the driver to modify and for some of them also their values. The command must be one of those defined in pi_spi_ioctl_e. </td></tr>
    <tr><td class="paramname">arg</td><td>An additional value which is required for some parameters when they are set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gac735eb27206159797c19a499c08a6cc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac735eb27206159797c19a499c08a6cc5">&#9670;&nbsp;</a></span>pi_i2s_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pi_i2s_open </td>
          <td>(</td>
          <td class="paramtype">struct pi_device *&#160;</td>
          <td class="paramname"><em>device</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function must be called before the I2S device can be used. It will do all the needed configuration to make it usable and initialize the handle used to refer to this opened device when calling other functions. The caller is blocked until the operation is finished.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device</td><td>A pointer to the device structure of the device to open. This structure is allocated by the caller and must be kept alive until the device is closed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if the operation is successfull, -1 if there was an error. </dd></dl>

</div>
</div>
<a id="gac863071a455cc4ecde8b458650ddc6f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac863071a455cc4ecde8b458650ddc6f4">&#9670;&nbsp;</a></span>pi_i2s_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pi_i2s_read </td>
          <td>(</td>
          <td class="paramtype">struct pi_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>mem_block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data received by the I2S interface is stored in the RX queue consisting of two memory blocks preallocated by the user and given to the driver in the configuration. Calling this function will return the next available buffer to the caller, which has to use it before the sampling for this buffer starts again.</p>
<p>The data is read in chunks equal to the size of the memory block.</p>
<p>When using several channels, the organization of the samples for each channel in the buffer, is chip-dependent, check the chip-specific documentation to get more information.</p>
<p>If there is no data in the RX queue the function will block waiting for the next RX memory block to fill in.</p>
<p>Due to hardware constraints, the address of the buffer must be aligned on 4 bytes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Pointer to the device structure for the driver instance. </td></tr>
    <tr><td class="paramname">mem_block</td><td>Pointer to the variable storing the address of the RX memory block containing received data. </td></tr>
    <tr><td class="paramname">size</td><td>Pointer to the variable storing the number of bytes read.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>If successful, -1 if not. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4811af1f7fcd3a58e24f0e53eab040c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4811af1f7fcd3a58e24f0e53eab040c7">&#9670;&nbsp;</a></span>pi_i2s_read_async()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pi_i2s_read_async </td>
          <td>(</td>
          <td class="paramtype">struct pi_device *&#160;</td>
          <td class="paramname"><em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pi_task_t *&#160;</td>
          <td class="paramname"><em>task</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data received by the I2S interface is stored in the RX queue consisting of two memory blocks preallocated by the user and given to the driver in the configuration. Calling this function will return the next available buffer to the caller, which has to use it before the sampling for this buffer starts again.</p>
<p>The data is read in chunks equal to the size of the memory block.</p>
<p>When using several channels, the organization of the samples for each channel in the buffer, is chip-dependent, check the chip-specific documentation to get more information.</p>
<p>The specified task will be pushed as soon as data is ready in the RX queue, and the information about the memory block and the size will be available in the task.</p>
<p>Due to hardware constraints, the address of the buffer must be aligned on 4 bytes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev</td><td>Pointer to the device structure for the driver instance. </td></tr>
    <tr><td class="paramname">task</td><td>The task used to notify the end of transfer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>If successful, -1 if not. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga0ccba1a796f9cc90c4d9ec24b2c5040d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0ccba1a796f9cc90c4d9ec24b2c5040d">&#9670;&nbsp;</a></span>pi_i2s_read_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pi_i2s_read_status </td>
          <td>(</td>
          <td class="paramtype">pi_task_t *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>mem_block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>After pi_i2s_read_async is called to be notified when a read buffer is available, and the notification is received, the output information can be retrieved by calling this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task used for notification. </td></tr>
    <tr><td class="paramname">mem_block</td><td>Pointer to the variable storing the address of the RX memory block containing received data. </td></tr>
    <tr><td class="paramname">size</td><td>Pointer to the variable storing the number of bytes read.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>If successful, -1 if not. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga81800a8f3373400f3c187c205028b3db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81800a8f3373400f3c187c205028b3db">&#9670;&nbsp;</a></span>pi_i2s_setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pi_i2s_setup </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function can be called to set specific I2S properties such as the number of clock generator. This is typically used by the BSP to give board specific information.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td>A bitfield of chip-dependant properties. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Feb 12 2020 11:11:35 for  by GreenWaves Technologies
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 
	-->
	</li>
  </ul>
</div>
</body>
</html>
