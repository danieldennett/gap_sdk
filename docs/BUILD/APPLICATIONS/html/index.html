<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Example Applications</title>
<title>Example Applications</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="pulp.css" rel="stylesheet" type="text/css" />
<link href="gap.css" rel="stylesheet" type="text/css" />
<link href="images.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="titlerow">
  <td id="projectlogo"><img alt="Logo" src="gap-logo-55.png" /></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">Example applications</div>
    </td>
  <td id="extralogo"><img alt="GreenWaves" src="greenwaves-logo-55.png" /></td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Example Applications </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="section0"></a>
Canny Edge Detection</h1>
<h2><a class="anchor" id="section1"></a>
Introduction</h2>
<p>Canny Edge Detection is a popular edge detection algorithm. It is a technique to extract useful structural information from different vision objects and dramatically reduce the amount of data to be processed. It has been widely applied in various computer vision systems.</p>
<p>With this application example, we show how this algorithm can be implemented on GAP8.</p>
<p>Thanks to GAP8's extended instruction set, we can finish a MAC operation (Multiply-Accumulate) of 2 four-vectors in only one cycle. To achieve maximum performance we use this by vectorizing the main operations of algorithm.</p>
<p>For instance, in the first step of the algorithm, which applies a Gaussian Filter (5 * 5) to smooth the image we have used seven 4 element vectors to represent the 5 * 5 filter. Please read the comments in the source code for further information.</p>
<h2><a class="anchor" id="section2"></a>
How to build and execute the application</h2>
<p>Please configure your shell for the SDK by running the <code>GAP</code> command as indicated in the GAP8 SDK Getting Started Guide.</p>
<p>To run the example type:</p>
<div class="fragment"><div class="line">make clean all run</div></div><!-- fragment --><h2><a class="anchor" id="section3"></a>
Result</h2>
<p>The result shows you the number of cycles used in each part of the algorithm when running the 8 cluster cores. The example operate on Pedestrian.pgm image and produces img_OUT.ppm which contains the image after canny edge elaboration.</p>
<p>An example of the output is:</p>
<div class="fragment"><div class="line">Start execution on GAP8</div><div class="line">Start of application</div><div class="line">bridge connecting</div><div class="line">Tcp_listener: client connected (fd 12)</div><div class="line">client connected</div><div class="line">Bridge connected, waiting for load image</div><div class="line">Image ../../../Pedestrian.pgm, [W: 320, H: 240], Gray, Size: 76800 bytes, Loaded sucessfully</div><div class="line">cluster master start</div><div class="line">Canny Edge Detector running on 8 cores, Source Mono image[W=320, H=240]</div><div class="line">Entering Master, W=320, H=240, 17 iterations, read stripes: 21 lines, wrote stripe: 13 lines</div><div class="line">Conv5x5_Byte_Vectorial                :     473669 Cycles</div><div class="line">EdgeIntensityAndOrientation_Vectorial :     738829 Cycles</div><div class="line">CannyRemoveNonMax                     :     530711 Cycles</div><div class="line">CannyBlobAnalysis                     :     380492 Cycles</div><div class="line">CannyRemoveWeakEdges                  :      27190 Cycles</div><div class="line">Total                                 :    2150891 Cycles</div><div class="line">Total with Master                     :    1197378 Cycles</div><div class="line">imgName: ../../../img_OUT.ppm</div><div class="line">Writing image  [#                             ]</div><div class="line">Writing image  [####                          ]</div><div class="line">Writing image  [#######                       ]</div><div class="line">Writing image  [###########                   ]</div><div class="line">Writing image  [##############                ]</div><div class="line">Writing image  [#################             ]</div><div class="line">Writing image  [#####################         ]</div><div class="line">Writing image  [########################      ]</div><div class="line">Writing image  [###########################   ]</div><div class="line">Detected end of application, exiting with status: 0</div><div class="line">Loop exited</div><div class="line">commands completed</div></div><!-- fragment --><p>With a core frequency of 100MHz this would execute in12ms if all 8 cores are used. </p>
<h1><a class="anchor" id="section4"></a>
Face Detection</h1>
<h2><a class="anchor" id="section5"></a>
Introduction</h2>
<p>The face detection example included in the GAP8 SDK is based on Viola-Jones face detection algorithm.</p>
<p>Algorithms kernels:</p>
<ol type="1">
<li>Image Resize</li>
<li>Integral Image</li>
<li>Squared Integral Image</li>
<li>Cascade Detector</li>
</ol>
<h2><a class="anchor" id="section6"></a>
Algorithm configuration:</h2>
<p>The detector is configured to detect faces from 64x48 px size to 40x30 px size. This is achieved using 3 pyramid layers.</p>
<h2><a class="anchor" id="section7"></a>
How to Build and Execute the Application</h2>
<p>Please configure your shell for the SDK by running the <code>GAP</code> command as indicated in the GAP8 SDK Getting Started Guide.</p>
<p>To run the example type:</p>
<div class="fragment"><div class="line">make clean all run</div></div><!-- fragment --><h3><a class="anchor" id="section8"></a>
Change Input-Output Configuration</h3>
<p>The example can run with two input-output configurations:</p>
<ol type="1">
<li><b>Input and Output from file on host PC (default configuration)</b></li>
<li><b>Input from Camera and output to LCD screen</b></li>
</ol>
<p>There are no additional requirements for mode 1, while for mode two the Himax camera must be connected to cpi camera interface and an additional LCD screen must be mounted on the arduino connector. The driver included in this example supports <a href="https://www.adafruit.com/products/1947">2.8 TFT LCD Shield based on ili9341 controller</a>.</p>
<p>To select between confiration 1 and 2 a define must be changed within the file main.c. To select configuration 1 (deafult) set macro:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define FROM_FILE 1</span></div></div><!-- fragment --><p> while to select configuration 2:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define FROM_FILE 0</span></div></div><!-- fragment --><p>After changing configuration the project must be rebuilt and run:</p>
<div class="fragment"><div class="line">make clean all run</div></div><!-- fragment --><h3><a class="anchor" id="section9"></a>
Change Input Image</h3>
<p>To change the input image the following two steps are required.</p>
<p>In the main.c file change the name of the input file:</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> *Imagefile = <span class="stringliteral">&quot;MyNewImage.ppm&quot;</span>;</div></div><!-- fragment --><p>So far only images of 324x244 size are supported. </p>
<h1><a class="anchor" id="section10"></a>
Multiscale Pedestrian Detection</h1>
<h2><a class="anchor" id="section11"></a>
Introduction</h2>
<p>The Pedestrian detection example included in the GAP8 SDK is implemented using a fixed point implementation of Histogram of Oriented Gradients (HOG) (See citation 1 below). The machine learning scheme used to classify HoG descriptor is a window-based boosting technique (See citation 2 below). [Figure 1] shows an algorithm overview.</p>
<div class="image">
<img src="./images/pedestrian_overview.png" alt="Figure 1 - Algorithm overview"/>
</div>
<p>The diagram shows the main steps of Pedestrian Detection on GAP8. First the image is sub-sampled multiple times to create an pyramid of images. Then on each layer of the pyramid the HOG features are computed. A fixed size sliding windows detector is employed on each of the feature pyramid layers to determine if the features window belongs to a pedestrian or not. The detector compares the feature with a pre-trained model with a fast boosted decision tree scheme.</p>
<h3><a class="anchor" id="section12"></a>
Histogram of Oriented Gradients (HoG)</h3>
<p>Histogram of oriented gradients (HOG) is a well known features extractor algorithm. The algorithm is composed of two hierarchical parts. The image is divided in tiles (in this example 8 x 8 pixels) called Cells and then on each cell the Histogram of Gradients is computed on 9 different angles. Thus the histogram has 9 bins.</p>
<p>Once this step is done for each cell, the cells are grouped in blocks (in this example 2 x 2 cells with stride of one cell). For each block the feature is normalized and an output of 36 bins (4 * 9) is produced.</p>
<p>For a more detailed explanation of the algorithm you can refer to these resources:</p>
<ul>
<li><a href="https://www.learnopencv.com/histogram-of-oriented-gradients/">Learn OpenCV Website</a></li>
<li><a href="http://ieeexplore.ieee.org/document/1467360/">Original Dalal and Triggs Paper</a></li>
</ul>
<h3><a class="anchor" id="section13"></a>
Sliding Window Detector</h3>
<p>The sliding windows detector tests for the existence of a pedestrian in each location in the input feature with a given stride. The windows is 128 x 64 pixels which gives a feature size of 3780 values. The machine learning algorithm used to classify pedestrians is based on small boosted trees.</p>
<h2><a class="anchor" id="section14"></a>
Algorithm configuration:</h2>
<p>The detector is configured to recognize pedestrian from 96x48 pixel size to 176x88 pixel size. This is achieved using 6 pyramid layers.</p>
<h2><a class="anchor" id="section15"></a>
How to Build and Execute the Application</h2>
<p>Please configure your shell for the SDK by running the <code>GAP</code> command as indicated in the GAP8 SDK Getting Started Guide.</p>
<p>To run the example type:</p>
<div class="fragment"><div class="line">make clean all run</div></div><!-- fragment --><h3><a class="anchor" id="section16"></a>
Change Input-Output Configuration</h3>
<p>The example can run with two input-output configurations:</p>
<ol type="1">
<li><b>Input and Output from file on host PC (default configuration)</b></li>
<li><b>Input from Camera and output to LCD screen</b></li>
</ol>
<p>There are no additional requirements for mode 1, while for mode two the Himax camera must be connected to cpi camera interface and an additional LCD screen must be mounted on the arduino connector. The driver included in this example supports <a href="https://www.adafruit.com/products/1947">2.8 TFT LCD Shield based on ili9341 controller</a>.</p>
<p>To select between confiration 1 and 2 a define must be changed within the file HoGEstim.c. To select configuration 1:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define FROM_FILE 1</span></div></div><!-- fragment --><p> and to select configuration 2</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define FROM_FILE 0</span></div></div><!-- fragment --><p>After changing configuration the project must be rebuilt and run:</p>
<div class="fragment"><div class="line">make clean all run</div></div><!-- fragment --><h3><a class="anchor" id="section17"></a>
Change Input Image</h3>
<p>To change the input image the following two steps are required.</p>
<p>In the main.c file change the name of the input file:</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> *Imagefile = <span class="stringliteral">&quot;MyNewImage.ppm&quot;</span>;</div></div><!-- fragment --><p>So far only images of 324x244 size are supported.</p>
<h2><a class="anchor" id="section18"></a>
Citations</h2>
<ol type="1">
<li>Dalal, Triggs, "Histograms of Oriented Gradients for Human Detection", <a href="https://www.google.fr/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;ved=0ahUKEwjY4JWW35jXAhVEOMAKHc7tDbkQFggqMAA&amp;url=https%3A%2F%2Fhal.inria.fr%2Finria-00548512%2Fdocument%2F&amp;usg=AOvVaw1O2xQKr0vIq4SsT-R30rK4">Link</a></li>
<li>Y. Freund, R.E. Schapire, "A Decision-Theoretic Generalization of On-Line Learning and an Application to Boosting", <a href="https://www.google.fr/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;ved=0ahUKEwi8q7fI4ZjXAhXFXRoKHUYEDLUQFggqMAA&amp;url=http%3A%2F%2Fwww.face-rec.org%2Falgorithms%2FBoosting-Ensemble%2Fdecision-theoretic_generalization.pdf&amp;usg=AOvVaw0L8cuezqaEAoVdWJhXaxho">Link</a> </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Jan 24 2020 12:47:55 for  by GreenWaves Technologies
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 
	-->
	</li>
  </ul>
</div>
</body>
</html>
